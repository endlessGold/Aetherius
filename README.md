# Aetherius Simulation Engine (에테리우스 시뮬레이션 엔진)

**Aetherius**는 고해상도 자연 현상과 생물학적 상호작용을 정밀하게 모사하기 위한 TypeScript 기반의 시뮬레이션 엔진입니다.  
단순한 게임 로직을 넘어, 물리적 확산(Diffusion), 이류(Advection), 그리고 리비히의 최소량의 법칙(Liebig's Law)에 기반한 식물 성장 모델을 포함합니다.

---

## 1. 프로젝트 비전 (Vision)

- **과학적 정밀함 (Scientific Accuracy)**: 20개 이상의 환경 변수와 10억 개 이상의 파라미터(Environment Grid)를 처리할 수 있는 구조.
- **확장성 (Scalability)**: CLI(로컬 테스트)와 Web Server(원격 API) 모드를 동시에 지원하는 이중 아키텍처.
- **결정론적 시뮬레이션 (Deterministic Simulation)**: 모든 상태 변경은 중앙 이벤트 루프(Event Loop)와 Tick 시스템을 통해서만 이루어짐.

---

## 2. 핵심 아키텍처 (Core Architecture)

### 2.1 이중 실행 모드 (Dual Execution Mode)
단일 코드베이스(`main.ts`)에서 실행 인자에 따라 두 가지 모드로 작동합니다.
- **CLI 모드 (`--mode cli`)**: 개발자 및 디버깅용 대화형 터미널.
- **Server 모드 (`--mode server`)**: Express 기반 REST API 서버. 외부 요청을 비동기 이벤트 큐(Event Queue)에 등록하여 처리.

### 2.2 이벤트 기반 시스템 (Event-Driven System)
모든 상호작용은 `EventBus`를 통해 발행(Publish) 및 구독(Subscribe) 됩니다.
- **네임스페이스(Namespace) 구조**: 명확한 계층 구조를 위해 줄임말을 사용하지 않고 전체 단어를 사용합니다.
  - `Simulation.Event`: 최상위 이벤트 인터페이스.
  - `Environment.Event`: 날씨, 물리 현상 등.
  - `Biological.Event`: 생명체 생성, 성장, 사멸 등.
  - `System.Event`: 틱(Tick), 데이터 저장 등.
  - `Command.Event`: 사용자 및 API 명령.

### 2.3 환경 그리드 (Environment Grid)
- **TypedArray 최적화**: 대규모 환경 데이터를 처리하기 위해 `Float32Array`를 사용하여 메모리 효율성과 연산 속도를 극대화.
- **물리 엔진**: 확산(Diffusion) 및 이류(Advection) 알고리즘을 통해 열, 수분, 영양분의 자연스러운 이동을 시뮬레이션.

### 2.4 생물학적 모델 (Biological Model)
- **고급 식물 컴포넌트 (`PlantComponent`)**:
  - 광합성 효율, 수분 스트레스, 영양분 흡수율 등 20+ 파라미터.
  - 환경 요인(빛, 물, CO2)의 상호작용을 곱셈 방식(Multiplicative)으로 계산하여 리얼한 성장 곡선 구현.

---

## 3. 기술 스택 (Tech Stack)

- **Language**: TypeScript (NodeNext Module System)
- **Runtime**: Node.js
- **Server Framework**: Express.js
- **Pattern**:
  - Entity-Component-System (ECS) Hybrid
  - Command Pattern (Virtual Command Handler)
  - Pub/Sub Event Bus
  - Single Responsibility Principle (SRP) 준수

---

## 4. 설치 및 실행 (Installation & Usage)

### 설치
```bash
npm install
```

### 실행
**CLI 모드 (기본값)**
```bash
npm start -- --mode cli
```

**서버 모드**
```bash
npm start -- --mode server
```

### API 예시 (Server Mode)
- **상태 확인**: `GET /status`
- **명령 전송**: `POST /command`
  ```json
  { "command": "spawn plant 10 10" }
  ```

---

## 5. 개발 원칙 (Development Principles)

1.  **No Abbreviations**: `Sim` 대신 `Simulation`, `Env` 대신 `Environment` 사용. 명확성이 길이보다 우선함.
2.  **Source of Truth**: GitHub 리포지토리를 유일한 진실의 원천(Single Source of Truth)으로 관리.
3.  **Security**: 민감한 정보(SSH Key 등)는 프라이빗 서브모듈([Aetherius-Secrets](https://github.com/endlessGold/Aetherius-Secrets))로 분리하여 관리.
4.  **Automation**: `auto-sync.ps1` 스크립트를 통해 공용 환경에서도 안전하게 작업 동기화.

---

## 6. 상세 개발 로드맵 (12개월) (Detailed Development Roadmap)

### **단기 (1~3개월) — 프리시즌 S0: "기반 완성 & 1차 런칭 준비"**

**핵심 콘텐츠**
- 튜토리얼 월드(1개) + 일반 월드(2~3개) + "실험/샌드박스 월드(룰 변형)" 1개
- 성장 축 3종 고정: **개체 성장(생산/전투/탐사 중 택1 강화)** + **월드 성장(시설/기후/자원 순환)** + **계정 메타(연구/특성/유산)**
- 엔드게임 전 단계까지("중반 루프" 완성): 일일/주간 목표, 반복 플레이 동기(드랍/연구/도감)

**신규 기능**
- 시즌/퀘스트 시스템(일일·주간·이벤트 퀘스트 템플릿)
- 인게임 우편/공지/점검 공지 + 기본 CS 도구(계정 조회/보상 지급/제재)
- 경제(상점) 최소 세트: 코스메틱(외형) + 편의(슬롯/프리셋) + 월정액(선택)

**밸런스 패치**
- 주 1회 밸런스 핫픽스(수치/드랍/난이도), 2주 1회 메이저 패치(콘텐츠/시스템)
- 밸런스 지표: 클리어율, 파밍 시간, 성장 정체 구간, 아이템 가치 분산도(Gini 유사 지표)

**이벤트 일정**
- M1: 런칭 기념 7일 출석 + "가속 성장(부스트) 주간"
- M2: 첫 월드 변형 이벤트(룰: 자원 2배/적 강화/특수 드랍)
- M3: 첫 커뮤니티 이벤트(누적 목표 달성형, 전 서버 공동 진행)

**유저 성장 구간별 목표**
- 초반(0~2일): 온보딩 완료, 핵심 루프 1회 완주, "첫 자동화 구성" 완성
- 중반(3~14일): 빌드 2개 확보(프리셋), 월드 2종 해금, 도감/연구 30%
- 후반(15~30일): 시즌 목표 70% 달성, 파밍 루트 고정, "상위 난이도 입장권" 확보

**수익화 전략**
- 프리시즌은 **신뢰/리텐션 우선**: 코스메틱 중심 + 편의(과금 비의존)
- 초기 상품 구성: 스타터 팩(1회), 월정액(가치 명확), 꾸미기 세트(테마)
- 과금 설계 원칙: 전투/성장 '직접 승리' 판매 최소화(페이투윈 인식 방지)

**기술 개선**
- 서버: 멀티 월드 이벤트 루프 격리, 월드 단위 크래시 격리/재시작, 백프레셔(큐 폭주) 방지
- 클라: 로딩 구간 분할, 렌더/시뮬 분리 옵션, 저사양 프리셋
- 관측성: 크래시/지연/경제지표/유저 퍼널 대시보드(필수)

**글로벌 확장**
- 1차: 한국어/영어 UI, 결제/약관/개인정보 기본 대응
- 소프트런치 타겟: 1개 권역(예: SEA) 선택, 서버 1리전 운영

**마케팅 연동 일정**
- M1: 티저 트레일러 + 사전예약/위시리스트
- M2: CBT/오픈 테스트, 스트리머 10~20명 시딩
- M3: 정식 런칭 캠페인(UGC 미션, 친구초대)

**KPI 목표치**
- MAU: 3~10만(런칭 규모에 따라 조정)
- D1/D7/D30 리텐션: 35% / 12% / 5%
- ARPDAU: 0.2~0.6달러(또는 KRW 300~900)
- 결제전환율: 1.5~3.0%
- 크래시프리 세션: 99.2%+

### **중기 (4~6개월) — 시즌 S1: "첫 대형 확장 & 글로벌 소프트런치"**

**핵심 콘텐츠**
- 신규 월드 2개 + "시즌 한정 월드(기후/룰/적 로테이션)" 1개
- 협동/소셜: 길드(또는 연합) + 공동 과제(주간) + 길드 상점/버프
- 첫 레이드/월드 보스(주 1회), 기여도 기반 보상

**신규 기능**
- 배틀패스(무료+유료) + 시즌 상점(시즌 재화)
- 하우징/전시(유저 성취 과시 영역) 또는 꾸미기 확대
- 빌드 다양화: 특성 트리 1~2개 분기 추가, "리스크-리턴" 아이템군

**밸런스 패치**
- 메타 교정: 최적 빌드 1강 방지(상위권 로그 기반 너프/버프)
- 경제 인플레 억제: 드랍 테이블 리밸런스, 싱크(소모처) 확충

**이벤트 일정**
- 4M: 시즌 오픈 이벤트(패스 경험치 부스트, 복귀 유도)
- 5M: 길드 경쟁 이벤트(비P2W 기여 미션 위주)
- 6M: 콜라보/테마 이벤트(가능 시) 또는 "월드 변형 페스티벌"

**유저 성장 목표**
- 초반: "길드 가입/첫 협동 1회"를 온보딩 필수로 편입
- 중반: 시즌 패스 60% 달성, 레이드 최소 난이도 클리어
- 후반: 엔드게임 루프 진입(주간 보스/시즌 월드 파밍 루틴 완성)

**수익화 전략**
- 매출 주력: **배틀패스 + 코스메틱 테마 시즌 판매**
- 장기 상품: 시즌 스킨 라인업, 한정 꾸미기, 편의 확장(프리셋/보관)
- 가격 정책: 지역별 가격 로컬라이징(환율/스토어 티어 반영)

**기술 개선**
- 서버: 오토스케일링(피크 대응), 매치메이킹/인스턴싱(보스/레이드)
- 보안: 치트/매크로 탐지(행동 이상치), 경제 어뷰징 차단(거래 제한/쿨다운)
- 클라: 프레임 타임 안정화, 메모리 누수/스파이크 제거(상위 크래시 Top N 제로화)

**글로벌 확장**
- 영어권/SEA 소프트런치 확대(2리전)
- 현지화: 텍스트+튜토리얼 이미지/영상 로컬라이징, 문화권 민감 요소 점검
- 운영: 24/7 CS 로테이션(최소 야간 온콜) 또는 외주 CS 투입

**마케팅**
- 시즌 트레일러 월 1회, 업데이트 노트 "요약 영상" 고정
- UA(퍼포먼스) 소규모 테스트 → LTV 기반 확장
- 앱스토어/플랫폼 피처드 신청(시즌 업데이트 타이밍)

**KPI 목표치**
- MAU: 10~30만
- D1/D7/D30: 38% / 15% / 7%
- ARPDAU: 0.4~1.2달러
- 결제전환율: 2.5~4.5%
- 길드 가입률: 35%+, 레이드 참여율: 주간 18%+

### **장기 (7~12개월) — 시즌 S2~S3: "라이브옵스 체계화 & 다지역 확장"**

#### **S2 (7~9개월): "경쟁/엔드게임 & 운영 자동화"**

**핵심 콘텐츠**
- 엔드게임: 상위 난이도(변이/저주/룰셋), 랭킹(시간/점수/효율)
- 커뮤니티 경쟁: 길드 리그(시즌제), 비동기 경쟁(유령 데이터/리플레이)

**신규 기능**
- 시즌 모디파이어(월드 룰 카드) + 유저 선택형 난이도 보정
- 제작/거래(가능 시): 제한적 거래소 또는 길드 내부 교환(경제 붕괴 방지 장치 포함)

**밸런스**
- 랭킹 메타 로테이션(시즌마다 핵심 옵션 일부 교체)

**이벤트**
- 분기 페스티벌(2주): 한정 월드+한정 보스+한정 코스메틱

**수익화**
- 시즌 테마 패키지(코스메틱 번들), VIP(편의) 고도화

**기술**
- 운영 자동화(이벤트/공지/보상 지급), 장애 대응 런북/알림
- 비용 최적화: 핫/콜드 월드 분리, 야간 축소 운영, CDN/캐시 튜닝

**글로벌**
- EU/NA 중 1개 권역 추가(3리전 체계)

**마케팅**
- 글로벌 인플루언서 캠페인(권역별), 커뮤니티 토너먼트

**KPI**
- MAU: 25~60만
- D30: 9%+, 재방문율(주간 복귀): 22%+
- 월 매출: 목표 범위 설정(예: 1~3억 KRW 시작 → 3~8억 KRW)

#### **S3 (10~12개월): "확장팩급 콘텐츠 & 2차 플랫폼"**

**핵심 콘텐츠**
- 확장팩: 신규 대륙/월드 3개 + 신규 성장 축 1개(예: 유산/혈통/유전자/직업)
- 스토리/도감/수집형 장기 목표(12주 이상)

**신규 기능**
- 크로스리전/크로스플랫폼(가능 시) 또는 플랫폼 확장(PC/콘솔 중 1개)
- UGC(가능 시 최소형): "룰/시드 공유", 유저 제작 챌린지

**밸런스**
- 대규모 리워크: 성장 곡선 재정비(신규 유저 진입 장벽 완화)

**이벤트**
- 연말 대형 이벤트(4주): 복귀 패스, 한정 스토리, 누적 공동 목표

**수익화**
- 확장팩 패스(시즌 패스 상위 개념) 또는 DLC형 코스메틱 대형 세트
- 광고는 선택형(리워드)만 고려(브랜드 훼손 방지)

**기술**
- 대규모 테스트 자동화(리그레션), 데이터 품질(스키마/ETL) 표준화
- 보안/컴플라이언스(지역 규정) 강화

**글로벌**
- 다국어 4~6개로 확대(영/한 + 일/중(번체)/독/스페인 등)

**마케팅**
- 확장팩 트레일러, 리뷰 캠페인, 파트너십(플랫폼 피처드/번들)

**KPI**
- MAU: 50~120만
- D7: 18%+, D30: 10~12%
- 결제전환율: 4.0~6.0%, ARPDAU 0.8~2.0달러

---

### **마일스톤별 담당 부서**
- **게임기획**: 코어 루프/성장/경제/이벤트 설계, 밸런스 방향성
- **콘텐츠팀**: 월드/보스/퀘스트/도감, 시즌 테마 제작
- **클라이언트**: UX, 최적화, 결제/상점/로컬라이징 UI
- **서버**: 멀티월드 실행, 매치/인스턴스, 보안, 운영툴/자동화
- **데이터/분석**: KPI 정의, 퍼널/리텐션/경제 모니터링, A/B 테스트
- **아트**: 코스메틱/이펙트/브랜딩 에셋, 시즌 테마 리소스
- **QA**: 기능/성능/호환성, 라이브 회귀 테스트
- **라이브옵스/CS**: 공지/이벤트 운영, 장애 대응, 제재/환불 프로세스
- **마케팅/커뮤니티**: 크리에이터 협업, UA, 커뮤니티 운영
- **법무/재무**: 약관/개인정보/청소년 정책, 지역 규정/세금, 예산 통제

---

### **리스크 대응 방안(상위 10개)**
1. 서버 부하/장애: 월드 격리, 오토스케일, 장애 런북, "핵심 기능 최소 운영 모드" 준비
2. 경제 인플레/어뷰징: 싱크 설계, 이상치 탐지, 거래 제한, 핫픽스 권한 체계
3. 메타 고착/밸런스 반발: 사전 공지(근거 지표), 점진 조정, 대체 빌드 상향
4. 콘텐츠 소진: 시즌 템플릿화(룰/보상/퀘스트 재사용), 제작 파이프라인 자동화
5. 리텐션 저하(중반 정체): 목표 재설계(주간 루프), 복귀 패스, 난이도 곡선 재조정
6. 치트/매크로: 행동 기반 탐지, 서버 권위 강화, 단계적 제재(경고→제한→밴)
7. 글로벌 규정/스토어 리스크: 국가별 약관/표기/확률형 규정 점검, 지역 가격/세금 테이블
8. 일정 지연: "Must/Should/Could" 스코프 관리, 시즌당 1개 대형+2개 중형 원칙
9. 품질/크래시: 크래시 Top N 제로 목표, 디바이스 매트릭스 기반 핫픽스
10. 마케팅 ROI 실패: 소규모 UA 실험→LTV 검증 후 확장, 크리에이터 콘텐츠 중심 전환

---

### **예산 및 인력 배치(12개월 권장안)**

**인력(FTE)**
- 기획: 2 → 3 → 3
- 클라이언트: 3 → 4 → 4~5
- 서버: 3 → 4 → 5
- 콘텐츠: 2 → 3 → 4
- 아트: 3 → 4 → 5
- 데이터/분석: 1 → 2 → 2
- QA: 1 → 2 → 3
- 라이브옵스/CS: 1 → 2 → 3
- 마케팅/커뮤니티: 1 → 2 → 3
- **합계: 17명 → 26명 → 32~34명**

**예산(월 기준, KRW)**
- 인건비: 2.0억 ~ 4.5억
- 인프라/툴: 0.2억 ~ 1.0억
- 외주: 0.3억 ~ 1.5억
- 마케팅: 0.3억~1.0억(단기) → 1.0억~3.0억(중기) → 2.0억~6.0억(장기)
- **총합(월): 2.8억 ~ 12.0억**
- **총합(12개월): 약 35억 ~ 110억**

---

### **운영 캘린더(고정 운영 리듬)**
- 매주: 밸런스 핫픽스/공지, 경제·치트 리포트
- 격주: 중형 이벤트(룰/드랍/퀘스트 로테이션)
- 매월: 신규 콘텐츠 1개 + QoL 3개
- 분기(3개월): 신규 시즌, 시즌 패스, 대형 테마 이벤트

---

*Copyright © 2026 EndlessGames. All Rights Reserved.*
