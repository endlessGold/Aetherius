# 2026년 2월 업데이트 로그

## 2026-02-17

- `docs/updates/` 폴더 추가 — 업데이트 로그 기록용
- 버그 수정: 서버 틱 시 `node.listenUpdate is not a function` — `Place`(core/node)가 `listenUpdate` 미구현이라 AssembleManager의 `listenUpdate`/`update` 호출 시 존재 여부 검사 추가 (`src/entities/assembly.ts`)
- 버그 수정: 서버 틱 시 `Cannot read properties of undefined (reading 'speed')` — EvolutionSystem에서 `goalGA.genome.stats`가 없는 엔티티 처리 시 방어 로직 추가 (`stepAgent`/`performAction`에서 `state.genome?.stats` 검사 후 스킵, `src/entities/evolutionSystem.ts`)

### Gemini 마이그레이션

- 로컬 LLM(OpenAI 호환) 제거, **Gemini API** 단일 연동으로 전환
- `package.json`: `openai` 제거, `@google/generative-ai` 추가
- `src/ai/llmService.ts`: `GeminiLLMService`만 사용, `.env`의 `GEMINI_API_KEY` 연동. 키 없으면 AI 기능 무음 처리
- (선택) `GEMINI_MODEL` (기본 `gemini-1.5-flash`)
- `.env.example`, README 4.3절, `docs/SECRETS_REF.md`: Gemini 기준으로 정리

### 다음 업데이트·미구현 정리

- `docs/EVENT_POLICY.md` 추가 — EventLoop vs EventBus 역할·사용 정책
- `docs/updates/NEXT.md` 추가 — DESIGN_REFACTOR 우선순위, Phase, 미구현(basic 타입 등) 정리
- DESIGN_REFACTOR 2.3 절에 EVENT_POLICY 링크 반영, ARCHITECTURE에 EVENT_POLICY·NEXT 링크 추가
