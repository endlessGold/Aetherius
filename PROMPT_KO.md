# Aetherius 초기 설계용 AI 프롬프트 (한국어)

당신은 TypeScript 기반 시뮬레이션 엔진 설계 및 구현 전문가입니다.
당신의 임무는 “Aetherius”라는 시뮬레이션 엔진의 **포괄적인 설계**와 **실행 가능한 최소 구현(MVP) 코드 구조**를 생성하는 것입니다.

## 0) 용어 고정 (필수)

이 프로젝트에서 “ECS”는 **편의상 사용하는 표현**이며, 전통적인 “일괄 처리(System이 Component 배열을 batch 처리)” ECS가 아닙니다.
실제 구조는 **ECR/ECE(레지스트리/이벤트) 기반 하이브리드**입니다.

- Registry: `World.nodes` + `EventBus`(구독 테이블 + 큐)
- System: batch가 아니라 `EventBus` 구독 기반의 리액터/핸들러
- Tick: `World.tick()` 경계에서 시간 진행과 상태 반영이 일어난다

## 1) 시뮬레이션 범위

- 다중 월드(Multi-World): 월드마다 독립 Tick 루프
- 플레이어 개입 없음: 엔터티는 자율적으로 진화/적응
- 환경: 물리, 생물, 생태계, 창발적 패턴 관측
- Tick 기반 이벤트 루프: 외부 입력은 큐로 들어오고 Tick에서 처리

## 2) 데이터 관리

- 매 Tick마다 NoSQL(최소: InMemory, 확장: MongoDB/Redis) 스냅샷 저장
- 장기 백업: Git 스냅샷/아카이브 확장 포인트 제공
- CLI/서버 동시 접근: 동일 Command 레이어를 공유

## 3) 핵심 아키텍처

- Node 기반: 모든 객체는 Node, Entity는 고유 ID를 가진 빈 Node
- Component 기반 상태: 컴포넌트는 작은 책임 단위로 상태/반응을 포함
- 이벤트: `EventBus` 우선(네임스페이스 이벤트), 레거시는 점진 마이그레이션
- Tick 루프: 비동기 Tick에서 이벤트 처리 → 환경 업데이트 → 개체 업데이트 → 스냅샷 저장

## 4) 물리 및 환경

- 결정론적 유체/열/수문 시뮬레이션의 확장 경로를 제시
- 플랫폼 간 IEEE 754 기반 부동소수점 결정론을 목표로 설계
- SoA/TypedArray 기반 대규모 셀(수십억 파라미터) 처리 구조

## 5) 생물학적 시뮬레이션: 목적 생성 GA(필수)

엔터티는 “목적(Purpose)” 자체를 생성/진화하며, 목적 달성을 위한 행동을 수행한다.

- Tick마다 수행 순서:
  1) 목적 평가/선택 (현재 결핍/환경/유전형 기반)
  2) 행동 실행 (이동/섭취/성장 등)
  3) 내부 상태 업데이트
  4) Fitness 갱신 (목적 달성도 + 생존/성장 등)
- 일정 Tick마다 세대 진화:
  - 선택(Selection): 상위 개체 생존
  - 교차(Crossover): 목적/형질 동시 교차
  - 돌연변이(Mutation): 목적/형질 동시 변이

## 6) 창발성 및 데이터 분석

- 군집 이동/식생 군락 등 창발적 패턴 관측을 위한 메트릭/로그 지점 정의
- 기후 변화/천이/카오스 검증을 위한 시나리오 입력 경로 정의
- GPGPU(WebGPU) 및 시각화(히트맵/그래프)는 확장 모듈로 분리

## 7) AI 예측 통합 (TensorFlow.js)

- Tick 스냅샷에서 필요한 feature를 추출해 예측을 수행한다.
- 예측값은 스냅샷에 함께 저장하거나 별도 시계열로 저장한다.
- 최소 구현은 “고정 가중치 선형 모델”이라도 TF 연산을 통해 예측 파이프라인을 검증한다.

## 8) 산출물 요구사항

다음을 반드시 포함하라:

- TypeScript 프로젝트 구조(파일/모듈 단위)
- Node/Component 인터페이스
- `World.tick()` 비동기 Tick 루프
- NoSQL 스냅샷 저장 훅(드라이버 선택 가능)
- CLI/서버 API 스텁(명령/상태/수동 Tick)
- TensorFlow.js 예측 통합 포인트
- 목적 생성 GA 구조(목적/형질 동시 진화)
- Phase 1~3 확장 문서 스켈레톤

